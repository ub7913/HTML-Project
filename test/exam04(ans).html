<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>exam04(ans).html</title>
</head>
<body>
    학번: <input type="text" id="studentNo">
    이름: <input type="text" id="name">
    학년: <select id="grade">
            <option value="1">1학년</option>
            <option value="2">2학년</option>
            <option value="3">3학년</option>
            <option value="4">4학년</option>
          </select>
    전공: <input type="text" id="major">
    <button id="btn">추가</button>
    <select id="userGrade">
        <option value="1">1학년</option>
        <option value="2">2학년</option>
        <option value="3">3학년</option>
        <option value="4">4학년</option>
    </select>
    <p id="show"></p>
    <script>
        var students=[];
        var show = document.getElementById('show');
        document.getElementById('btn').addEventListener('click', function() {
            var studentNo=document.getElementById('studentNo').value;
            var name=document.getElementById('name').value;
            var grade=document.getElementById('grade').value;
            var major=document.getElementById('major').value;
            var student = {
            studentNo: studentNo, name: name, grade: grade, major:major
            }
            students.push(student);
            
            show.innerHTML = null;
            students.forEach(function(a) {
                var $li = document.createElement('li');
                var $text = document.createTextNode(a.studentNo + " " + a.name + " " + a.grade + " " + a.major);
                $li.appendChild($text);
                show.appendChild($li);
            })
            // console.log(students);
        });

        document.getElementById('userGrade').onchange = function() {

            var grade = this.value;
            show.innerHTML = null;
            var filterStudents = students.filter(function(o) {
                return o.grade == grade;
            });
            var showLi = document.querySelectorAll('#show > li');
            showLi.forEach(function(o) {
                o.remove;
            });
            filterStudents.forEach(function(a) {
                // console.log(a);
                var $li = document.createElement('li');
                var $text = document.createTextNode(a.studentNo + " " + a.name + " " + a.grade + " " + a.major);
                $li.appendChild($text);
                show.appendChild($li);
            });

        };


    </script>
</body>
</html>