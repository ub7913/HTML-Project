<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test/exam04.html</title>
</head>

<body>
    학번 : <input type="text" id="a"> <br>
    이름 : <input type="text" id="b"> <br>
    학년 : <input type="text" id="c"> <br>
    전공 : <input type="text" id="d"> <br>
    <button id="btn">등록</button><br><br>
    <select id="sel">
        <option value="1">1학년</option>
        <option value="2">2학년</option>
        <option value="3">3학년</option>
        <option value="4">4학년</option>
    </select>
    <p id="show"></p>

    <script>
        var show = document.getElementById('show');
        var $btn = document.getElementById('btn');
        var $sel = document.getElementById('sel');
        var array =[];
        $btn.onclick = function () {
            var a = document.getElementById("a").value;
            var b = document.getElementById("b").value;
            var c = document.getElementById("c").value;
            var d = document.getElementById("d").value;
            var student1 = {studentNO: a, name: b, grade: c, major: d};
            array.push(student1);
            console.log(array);  
        }

        $sel.onchange = function() {
            document.getElementById('show').innerHTML=null;
            var grade = parseInt(document.getElementById("sel").value);
            var titles = ["학번", "이름", "학년", "전공"];
            var $table = document.createElement("table");
            $table.setAttribute("border", "1");
            $table.setAttribute("id", "tbl");
            var $tr = document.createElement("tr");
            for (field of titles) {
                var $th = document.createElement("th");
                var $text = document.createTextNode(field);
                $th.appendChild($text);
                $tr.appendChild($th);
            }
            $table.appendChild($tr);
            var filterAry = array.filter(function(a) {
                return a.grade == grade;
            });
           
            filterAry.forEach(function(o) {
                var $tr = document.createElement("tr");
                console.log(o)
                for (field in o) {
                    var $td = document.createElement("td");
                    var $text = document.createTextNode(o[field]);
                    $td.appendChild($text);
                    $tr.appendChild($td);
                }
                $table.appendChild($tr);
            });
            show.appendChild($table);
        }
    </script>
</body>

</html>